"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/story/highlight";
exports.ids = ["pages/api/story/highlight"];
exports.modules = {

/***/ "(api-node)/./lib/db/db.js":
/*!**********************!*\
  !*** ./lib/db/db.js ***!
  \**********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst sqlite3 = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\nconst path = __webpack_require__(/*! path */ \"path\");\nconst fs = __webpack_require__(/*! fs */ \"fs\");\n// Ensure data directory exists\nconst dataDir = path.join(process.cwd(), 'data');\nif (!fs.existsSync(dataDir)) {\n    fs.mkdirSync(dataDir);\n}\n// Connect to SQLite database\nconst dbPath = path.join(process.cwd(), 'data', 'database.sqlite');\nconst db = sqlite3(dbPath);\n// Initialize database tables if they don't exist\nfunction initDb() {\n    // Users table\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      username TEXT UNIQUE NOT NULL,\n      password TEXT NOT NULL,\n      selectedLanguage TEXT DEFAULT 'Spanish',\n      nativeLanguage TEXT DEFAULT 'English',\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n    )\n  `);\n    // Stories table\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS stories (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      user_id INTEGER NOT NULL,\n      content TEXT NOT NULL,\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (user_id) REFERENCES users (id)\n    )\n  `);\n    // Words table for highlighted words\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS highlighted_words (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      user_id INTEGER NOT NULL,\n      word TEXT NOT NULL,\n      is_recent BOOLEAN DEFAULT 1,\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (user_id) REFERENCES users (id)\n    )\n  `);\n    console.log('Database initialized');\n}\n// Initialize the database\ninitDb();\nmodule.exports = db;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi9kYi5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsVUFBVUMsbUJBQU9BLENBQUMsc0NBQWdCO0FBQ3hDLE1BQU1DLE9BQU9ELG1CQUFPQSxDQUFDLGtCQUFNO0FBQzNCLE1BQU1FLEtBQUtGLG1CQUFPQSxDQUFDLGNBQUk7QUFFdkIsK0JBQStCO0FBQy9CLE1BQU1HLFVBQVVGLEtBQUtHLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxJQUFJO0FBQ3pDLElBQUksQ0FBQ0osR0FBR0ssVUFBVSxDQUFDSixVQUFVO0lBQzNCRCxHQUFHTSxTQUFTLENBQUNMO0FBQ2Y7QUFFQSw2QkFBNkI7QUFDN0IsTUFBTU0sU0FBU1IsS0FBS0csSUFBSSxDQUFDQyxRQUFRQyxHQUFHLElBQUksUUFBUTtBQUNoRCxNQUFNSSxLQUFLWCxRQUFRVTtBQUVuQixpREFBaUQ7QUFDakQsU0FBU0U7SUFDUCxjQUFjO0lBQ2RELEdBQUdFLElBQUksQ0FBQyxDQUFDOzs7Ozs7Ozs7RUFTVCxDQUFDO0lBRUQsZ0JBQWdCO0lBQ2hCRixHQUFHRSxJQUFJLENBQUMsQ0FBQzs7Ozs7Ozs7RUFRVCxDQUFDO0lBRUQsb0NBQW9DO0lBQ3BDRixHQUFHRSxJQUFJLENBQUMsQ0FBQzs7Ozs7Ozs7O0VBU1QsQ0FBQztJQUVEQyxRQUFRQyxHQUFHLENBQUM7QUFDZDtBQUVBLDBCQUEwQjtBQUMxQkg7QUFFQUksT0FBT0MsT0FBTyxHQUFHTiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxiZW5hdVxcbXktYXBwXFxsaWJcXGRiXFxkYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzcWxpdGUzID0gcmVxdWlyZSgnYmV0dGVyLXNxbGl0ZTMnKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5cclxuLy8gRW5zdXJlIGRhdGEgZGlyZWN0b3J5IGV4aXN0c1xyXG5jb25zdCBkYXRhRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJyk7XHJcbmlmICghZnMuZXhpc3RzU3luYyhkYXRhRGlyKSkge1xyXG4gIGZzLm1rZGlyU3luYyhkYXRhRGlyKTtcclxufVxyXG5cclxuLy8gQ29ubmVjdCB0byBTUUxpdGUgZGF0YWJhc2VcclxuY29uc3QgZGJQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ2RhdGFiYXNlLnNxbGl0ZScpO1xyXG5jb25zdCBkYiA9IHNxbGl0ZTMoZGJQYXRoKTtcclxuXHJcbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgdGFibGVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcclxuZnVuY3Rpb24gaW5pdERiKCkge1xyXG4gIC8vIFVzZXJzIHRhYmxlXHJcbiAgZGIuZXhlYyhgXHJcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB1c2VycyAoXHJcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgdXNlcm5hbWUgVEVYVCBVTklRVUUgTk9UIE5VTEwsXHJcbiAgICAgIHBhc3N3b3JkIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgIHNlbGVjdGVkTGFuZ3VhZ2UgVEVYVCBERUZBVUxUICdTcGFuaXNoJyxcclxuICAgICAgbmF0aXZlTGFuZ3VhZ2UgVEVYVCBERUZBVUxUICdFbmdsaXNoJyxcclxuICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxyXG4gICAgKVxyXG4gIGApO1xyXG5cclxuICAvLyBTdG9yaWVzIHRhYmxlXHJcbiAgZGIuZXhlYyhgXHJcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzdG9yaWVzIChcclxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICB1c2VyX2lkIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgIGNvbnRlbnQgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcclxuICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMgKGlkKVxyXG4gICAgKVxyXG4gIGApO1xyXG5cclxuICAvLyBXb3JkcyB0YWJsZSBmb3IgaGlnaGxpZ2h0ZWQgd29yZHNcclxuICBkYi5leGVjKGBcclxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGhpZ2hsaWdodGVkX3dvcmRzIChcclxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICB1c2VyX2lkIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgIHdvcmQgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgaXNfcmVjZW50IEJPT0xFQU4gREVGQVVMVCAxLFxyXG4gICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxyXG4gICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyAoaWQpXHJcbiAgICApXHJcbiAgYCk7XHJcblxyXG4gIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBpbml0aWFsaXplZCcpO1xyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBkYXRhYmFzZVxyXG5pbml0RGIoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZGI7Il0sIm5hbWVzIjpbInNxbGl0ZTMiLCJyZXF1aXJlIiwicGF0aCIsImZzIiwiZGF0YURpciIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsImRiUGF0aCIsImRiIiwiaW5pdERiIiwiZXhlYyIsImNvbnNvbGUiLCJsb2ciLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/db/db.js\n");

/***/ }),

/***/ "(api-node)/./lib/db/stories.js":
/*!***************************!*\
  !*** ./lib/db/stories.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst db = __webpack_require__(/*! ./db */ \"(api-node)/./lib/db/db.js\");\nconst storiesDb = {\n    // Save a new story for user\n    save: (userId, content)=>{\n        // Delete previous stories for this user\n        const deleteStmt = db.prepare('DELETE FROM stories WHERE user_id = ?');\n        deleteStmt.run(userId);\n        // Insert new story\n        const insertStmt = db.prepare('INSERT INTO stories (user_id, content) VALUES (?, ?)');\n        const result = insertStmt.run(userId, content);\n        return {\n            id: result.lastInsertRowid,\n            content\n        };\n    },\n    // Get the latest story for a user\n    getLatest: (userId)=>{\n        const stmt = db.prepare(`\n      SELECT * FROM stories \n      WHERE user_id = ? \n      ORDER BY created_at DESC \n      LIMIT 1\n    `);\n        return stmt.get(userId);\n    },\n    // Save a highlighted word\n    saveHighlightedWord: (userId, word)=>{\n        const stmt = db.prepare('INSERT INTO highlighted_words (user_id, word) VALUES (?, ?)');\n        stmt.run(userId, word);\n    },\n    // Get recently highlighted words for a user\n    getRecentHighlights: (userId)=>{\n        const stmt = db.prepare(`\n      SELECT word FROM highlighted_words\n      WHERE user_id = ? AND is_recent = 1\n      ORDER BY created_at DESC\n    `);\n        const results = stmt.all(userId);\n        return results.map((row)=>row.word);\n    },\n    // Get previously highlighted words for a user\n    getPreviousHighlights: (userId)=>{\n        const stmt = db.prepare(`\n      SELECT word FROM highlighted_words\n      WHERE user_id = ? AND is_recent = 0\n      ORDER BY created_at DESC\n    `);\n        const results = stmt.all(userId);\n        return results.map((row)=>row.word);\n    },\n    // Move recently highlighted words to previous highlights\n    archiveRecentHighlights: (userId)=>{\n        const stmt = db.prepare('UPDATE highlighted_words SET is_recent = 0 WHERE user_id = ? AND is_recent = 1');\n        stmt.run(userId);\n    }\n};\nmodule.exports = storiesDb;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi9zdG9yaWVzLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxLQUFLQyxtQkFBT0EsQ0FBQyx1Q0FBTTtBQUV6QixNQUFNQyxZQUFZO0lBQ2hCLDRCQUE0QjtJQUM1QkMsTUFBTSxDQUFDQyxRQUFRQztRQUNiLHdDQUF3QztRQUN4QyxNQUFNQyxhQUFhTixHQUFHTyxPQUFPLENBQUM7UUFDOUJELFdBQVdFLEdBQUcsQ0FBQ0o7UUFFZixtQkFBbUI7UUFDbkIsTUFBTUssYUFBYVQsR0FBR08sT0FBTyxDQUFDO1FBQzlCLE1BQU1HLFNBQVNELFdBQVdELEdBQUcsQ0FBQ0osUUFBUUM7UUFDdEMsT0FBTztZQUFFTSxJQUFJRCxPQUFPRSxlQUFlO1lBQUVQO1FBQVE7SUFDL0M7SUFFQSxrQ0FBa0M7SUFDbENRLFdBQVcsQ0FBQ1Q7UUFDVixNQUFNVSxPQUFPZCxHQUFHTyxPQUFPLENBQUMsQ0FBQzs7Ozs7SUFLekIsQ0FBQztRQUNELE9BQU9PLEtBQUtDLEdBQUcsQ0FBQ1g7SUFDbEI7SUFFQSwwQkFBMEI7SUFDMUJZLHFCQUFxQixDQUFDWixRQUFRYTtRQUM1QixNQUFNSCxPQUFPZCxHQUFHTyxPQUFPLENBQUM7UUFDeEJPLEtBQUtOLEdBQUcsQ0FBQ0osUUFBUWE7SUFDbkI7SUFFQSw0Q0FBNEM7SUFDNUNDLHFCQUFxQixDQUFDZDtRQUNwQixNQUFNVSxPQUFPZCxHQUFHTyxPQUFPLENBQUMsQ0FBQzs7OztJQUl6QixDQUFDO1FBQ0QsTUFBTVksVUFBVUwsS0FBS00sR0FBRyxDQUFDaEI7UUFDekIsT0FBT2UsUUFBUUUsR0FBRyxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJTCxJQUFJO0lBQ3BDO0lBRUEsOENBQThDO0lBQzlDTSx1QkFBdUIsQ0FBQ25CO1FBQ3RCLE1BQU1VLE9BQU9kLEdBQUdPLE9BQU8sQ0FBQyxDQUFDOzs7O0lBSXpCLENBQUM7UUFDRCxNQUFNWSxVQUFVTCxLQUFLTSxHQUFHLENBQUNoQjtRQUN6QixPQUFPZSxRQUFRRSxHQUFHLENBQUNDLENBQUFBLE1BQU9BLElBQUlMLElBQUk7SUFDcEM7SUFFQSx5REFBeUQ7SUFDekRPLHlCQUF5QixDQUFDcEI7UUFDeEIsTUFBTVUsT0FBT2QsR0FBR08sT0FBTyxDQUFDO1FBQ3hCTyxLQUFLTixHQUFHLENBQUNKO0lBQ1g7QUFDRjtBQUVBcUIsT0FBT0MsT0FBTyxHQUFHeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYmVuYXVcXG15LWFwcFxcbGliXFxkYlxcc3Rvcmllcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYiA9IHJlcXVpcmUoJy4vZGInKTtcclxuXHJcbmNvbnN0IHN0b3JpZXNEYiA9IHtcclxuICAvLyBTYXZlIGEgbmV3IHN0b3J5IGZvciB1c2VyXHJcbiAgc2F2ZTogKHVzZXJJZCwgY29udGVudCkgPT4ge1xyXG4gICAgLy8gRGVsZXRlIHByZXZpb3VzIHN0b3JpZXMgZm9yIHRoaXMgdXNlclxyXG4gICAgY29uc3QgZGVsZXRlU3RtdCA9IGRiLnByZXBhcmUoJ0RFTEVURSBGUk9NIHN0b3JpZXMgV0hFUkUgdXNlcl9pZCA9ID8nKTtcclxuICAgIGRlbGV0ZVN0bXQucnVuKHVzZXJJZCk7XHJcbiAgICBcclxuICAgIC8vIEluc2VydCBuZXcgc3RvcnlcclxuICAgIGNvbnN0IGluc2VydFN0bXQgPSBkYi5wcmVwYXJlKCdJTlNFUlQgSU5UTyBzdG9yaWVzICh1c2VyX2lkLCBjb250ZW50KSBWQUxVRVMgKD8sID8pJyk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBpbnNlcnRTdG10LnJ1bih1c2VySWQsIGNvbnRlbnQpO1xyXG4gICAgcmV0dXJuIHsgaWQ6IHJlc3VsdC5sYXN0SW5zZXJ0Um93aWQsIGNvbnRlbnQgfTtcclxuICB9LFxyXG5cclxuICAvLyBHZXQgdGhlIGxhdGVzdCBzdG9yeSBmb3IgYSB1c2VyXHJcbiAgZ2V0TGF0ZXN0OiAodXNlcklkKSA9PiB7XHJcbiAgICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXHJcbiAgICAgIFNFTEVDVCAqIEZST00gc3RvcmllcyBcclxuICAgICAgV0hFUkUgdXNlcl9pZCA9ID8gXHJcbiAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBcclxuICAgICAgTElNSVQgMVxyXG4gICAgYCk7XHJcbiAgICByZXR1cm4gc3RtdC5nZXQodXNlcklkKTtcclxuICB9LFxyXG5cclxuICAvLyBTYXZlIGEgaGlnaGxpZ2h0ZWQgd29yZFxyXG4gIHNhdmVIaWdobGlnaHRlZFdvcmQ6ICh1c2VySWQsIHdvcmQpID0+IHtcclxuICAgIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKCdJTlNFUlQgSU5UTyBoaWdobGlnaHRlZF93b3JkcyAodXNlcl9pZCwgd29yZCkgVkFMVUVTICg/LCA/KScpO1xyXG4gICAgc3RtdC5ydW4odXNlcklkLCB3b3JkKTtcclxuICB9LFxyXG5cclxuICAvLyBHZXQgcmVjZW50bHkgaGlnaGxpZ2h0ZWQgd29yZHMgZm9yIGEgdXNlclxyXG4gIGdldFJlY2VudEhpZ2hsaWdodHM6ICh1c2VySWQpID0+IHtcclxuICAgIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcclxuICAgICAgU0VMRUNUIHdvcmQgRlJPTSBoaWdobGlnaHRlZF93b3Jkc1xyXG4gICAgICBXSEVSRSB1c2VyX2lkID0gPyBBTkQgaXNfcmVjZW50ID0gMVxyXG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0NcclxuICAgIGApO1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IHN0bXQuYWxsKHVzZXJJZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0cy5tYXAocm93ID0+IHJvdy53b3JkKTtcclxuICB9LFxyXG5cclxuICAvLyBHZXQgcHJldmlvdXNseSBoaWdobGlnaHRlZCB3b3JkcyBmb3IgYSB1c2VyXHJcbiAgZ2V0UHJldmlvdXNIaWdobGlnaHRzOiAodXNlcklkKSA9PiB7XHJcbiAgICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXHJcbiAgICAgIFNFTEVDVCB3b3JkIEZST00gaGlnaGxpZ2h0ZWRfd29yZHNcclxuICAgICAgV0hFUkUgdXNlcl9pZCA9ID8gQU5EIGlzX3JlY2VudCA9IDBcclxuICAgICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXHJcbiAgICBgKTtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBzdG10LmFsbCh1c2VySWQpO1xyXG4gICAgcmV0dXJuIHJlc3VsdHMubWFwKHJvdyA9PiByb3cud29yZCk7XHJcbiAgfSxcclxuXHJcbiAgLy8gTW92ZSByZWNlbnRseSBoaWdobGlnaHRlZCB3b3JkcyB0byBwcmV2aW91cyBoaWdobGlnaHRzXHJcbiAgYXJjaGl2ZVJlY2VudEhpZ2hsaWdodHM6ICh1c2VySWQpID0+IHtcclxuICAgIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKCdVUERBVEUgaGlnaGxpZ2h0ZWRfd29yZHMgU0VUIGlzX3JlY2VudCA9IDAgV0hFUkUgdXNlcl9pZCA9ID8gQU5EIGlzX3JlY2VudCA9IDEnKTtcclxuICAgIHN0bXQucnVuKHVzZXJJZCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzdG9yaWVzRGI7Il0sIm5hbWVzIjpbImRiIiwicmVxdWlyZSIsInN0b3JpZXNEYiIsInNhdmUiLCJ1c2VySWQiLCJjb250ZW50IiwiZGVsZXRlU3RtdCIsInByZXBhcmUiLCJydW4iLCJpbnNlcnRTdG10IiwicmVzdWx0IiwiaWQiLCJsYXN0SW5zZXJ0Um93aWQiLCJnZXRMYXRlc3QiLCJzdG10IiwiZ2V0Iiwic2F2ZUhpZ2hsaWdodGVkV29yZCIsIndvcmQiLCJnZXRSZWNlbnRIaWdobGlnaHRzIiwicmVzdWx0cyIsImFsbCIsIm1hcCIsInJvdyIsImdldFByZXZpb3VzSGlnaGxpZ2h0cyIsImFyY2hpdmVSZWNlbnRIaWdobGlnaHRzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/db/stories.js\n");

/***/ }),

/***/ "(api-node)/./lib/utils/auth.js":
/*!***************************!*\
  !*** ./lib/utils/auth.js ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   sessionOptions: () => (/* binding */ sessionOptions),\n/* harmony export */   withSession: () => (/* binding */ withSession)\n/* harmony export */ });\n/* harmony import */ var iron_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! iron-session */ \"iron-session\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([iron_session__WEBPACK_IMPORTED_MODULE_0__]);\niron_session__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst sessionOptions = {\n    password: 'complex_password_at_least_32_characters_long',\n    cookieName: 'spanish-story-session',\n    cookieOptions: {\n        secure: \"development\" === 'production',\n        maxAge: 60 * 60 * 24 * 7\n    }\n};\n// Middleware for API routes\nasync function withSession(req, res, next) {\n    req.session = await (0,iron_session__WEBPACK_IMPORTED_MODULE_0__.getIronSession)(req, res, sessionOptions);\n    return next();\n}\n// For SSR pages\nasync function getServerSideProps({ req, res }) {\n    const session = await (0,iron_session__WEBPACK_IMPORTED_MODULE_0__.getIronSession)(req, res, sessionOptions);\n    return {\n        props: {\n            user: session.user || null\n        }\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi91dGlscy9hdXRoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEM7QUFFdkMsTUFBTUMsaUJBQWlCO0lBQzVCQyxVQUFVO0lBQ1ZDLFlBQVk7SUFDWkMsZUFBZTtRQUNiQyxRQUFRQyxrQkFBeUI7UUFDakNDLFFBQVEsS0FBSyxLQUFLLEtBQUs7SUFDekI7QUFDRixFQUFFO0FBRUYsNEJBQTRCO0FBQ3JCLGVBQWVDLFlBQVlDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJO0lBQzlDRixJQUFJRyxPQUFPLEdBQUcsTUFBTVosNERBQWNBLENBQUNTLEtBQUtDLEtBQUtUO0lBQzdDLE9BQU9VO0FBQ1Q7QUFFQSxnQkFBZ0I7QUFDVCxlQUFlRSxtQkFBbUIsRUFBRUosR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDbkQsTUFBTUUsVUFBVSxNQUFNWiw0REFBY0EsQ0FBQ1MsS0FBS0MsS0FBS1Q7SUFFL0MsT0FBTztRQUNMYSxPQUFPO1lBQ0xDLE1BQU1ILFFBQVFHLElBQUksSUFBSTtRQUN4QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYmVuYXVcXG15LWFwcFxcbGliXFx1dGlsc1xcYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcm9uU2Vzc2lvbiB9IGZyb20gJ2lyb24tc2Vzc2lvbic7XHJcblxyXG5leHBvcnQgY29uc3Qgc2Vzc2lvbk9wdGlvbnMgPSB7XHJcbiAgcGFzc3dvcmQ6ICdjb21wbGV4X3Bhc3N3b3JkX2F0X2xlYXN0XzMyX2NoYXJhY3RlcnNfbG9uZycsICAvLyBJbiBwcm9kdWN0aW9uLCB1c2UgYSBzdHJvbmcgcGFzc3dvcmRcclxuICBjb29raWVOYW1lOiAnc3BhbmlzaC1zdG9yeS1zZXNzaW9uJyxcclxuICBjb29raWVPcHRpb25zOiB7XHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsIC8vIDEgd2Vla1xyXG4gIH0sXHJcbn07XHJcblxyXG4vLyBNaWRkbGV3YXJlIGZvciBBUEkgcm91dGVzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoU2Vzc2lvbihyZXEsIHJlcywgbmV4dCkge1xyXG4gIHJlcS5zZXNzaW9uID0gYXdhaXQgZ2V0SXJvblNlc3Npb24ocmVxLCByZXMsIHNlc3Npb25PcHRpb25zKTtcclxuICByZXR1cm4gbmV4dCgpO1xyXG59XHJcblxyXG4vLyBGb3IgU1NSIHBhZ2VzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoeyByZXEsIHJlcyB9KSB7XHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldElyb25TZXNzaW9uKHJlcSwgcmVzLCBzZXNzaW9uT3B0aW9ucyk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHByb3BzOiB7XHJcbiAgICAgIHVzZXI6IHNlc3Npb24udXNlciB8fCBudWxsLFxyXG4gICAgfSxcclxuICB9O1xyXG59Il0sIm5hbWVzIjpbImdldElyb25TZXNzaW9uIiwic2Vzc2lvbk9wdGlvbnMiLCJwYXNzd29yZCIsImNvb2tpZU5hbWUiLCJjb29raWVPcHRpb25zIiwic2VjdXJlIiwicHJvY2VzcyIsIm1heEFnZSIsIndpdGhTZXNzaW9uIiwicmVxIiwicmVzIiwibmV4dCIsInNlc3Npb24iLCJnZXRTZXJ2ZXJTaWRlUHJvcHMiLCJwcm9wcyIsInVzZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/utils/auth.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstory%2Fhighlight&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstory%5Chighlight.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstory%2Fhighlight&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstory%5Chighlight.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_story_highlight_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\story\\highlight.js */ \"(api-node)/./pages/api/story/highlight.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_story_highlight_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_story_highlight_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_story_highlight_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_story_highlight_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/story/highlight\",\n        pathname: \"/api/story/highlight\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_story_highlight_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGc3RvcnklMkZoaWdobGlnaHQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3N0b3J5JTVDaGlnaGxpZ2h0LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzhEO0FBQzlEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywwREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMERBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcc3RvcnlcXFxcaGlnaGxpZ2h0LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdG9yeS9oaWdobGlnaHRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdG9yeS9oaWdobGlnaHRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstory%2Fhighlight&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstory%5Chighlight.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/story/highlight.js":
/*!**************************************!*\
  !*** ./pages/api/story/highlight.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var iron_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! iron-session */ \"iron-session\");\n/* harmony import */ var _lib_utils_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/utils/auth */ \"(api-node)/./lib/utils/auth.js\");\n/* harmony import */ var _lib_db_stories__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db/stories */ \"(api-node)/./lib/db/stories.js\");\n/* harmony import */ var _lib_db_stories__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_lib_db_stories__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([iron_session__WEBPACK_IMPORTED_MODULE_0__, _lib_utils_auth__WEBPACK_IMPORTED_MODULE_1__]);\n([iron_session__WEBPACK_IMPORTED_MODULE_0__, _lib_utils_auth__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nasync function handler(req, res) {\n    // Get session\n    const session = await (0,iron_session__WEBPACK_IMPORTED_MODULE_0__.getIronSession)(req, res, _lib_utils_auth__WEBPACK_IMPORTED_MODULE_1__.sessionOptions);\n    // Check if user is authenticated\n    if (!session.user) {\n        return res.status(401).json({\n            error: 'Not authenticated'\n        });\n    }\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { word } = req.body;\n        if (!word) {\n            return res.status(400).json({\n                error: 'Word is required'\n            });\n        }\n        // Save the highlighted word\n        _lib_db_stories__WEBPACK_IMPORTED_MODULE_2___default().saveHighlightedWord(session.user.id, word);\n        // Get the updated list of recently highlighted words\n        const recentHighlights = _lib_db_stories__WEBPACK_IMPORTED_MODULE_2___default().getRecentHighlights(session.user.id);\n        return res.status(200).json({\n            recentHighlights\n        });\n    } catch (error) {\n        console.error('Error highlighting word:', error);\n        return res.status(500).json({\n            error: 'Failed to highlight word'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9zdG9yeS9oaWdobGlnaHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBOEM7QUFDVztBQUNUO0FBRWpDLGVBQWVHLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxjQUFjO0lBQ2QsTUFBTUMsVUFBVSxNQUFNTiw0REFBY0EsQ0FBQ0ksS0FBS0MsS0FBS0osMkRBQWNBO0lBRTdELGlDQUFpQztJQUNqQyxJQUFJLENBQUNLLFFBQVFDLElBQUksRUFBRTtRQUNqQixPQUFPRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBb0I7SUFDM0Q7SUFFQSxJQUFJTixJQUFJTyxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPTixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7SUFDNUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFRSxJQUFJLEVBQUUsR0FBR1IsSUFBSVMsSUFBSTtRQUV6QixJQUFJLENBQUNELE1BQU07WUFDVCxPQUFPUCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQW1CO1FBQzFEO1FBRUEsNEJBQTRCO1FBQzVCUiwwRUFBNkIsQ0FBQ0ksUUFBUUMsSUFBSSxDQUFDUSxFQUFFLEVBQUVIO1FBRS9DLHFEQUFxRDtRQUNyRCxNQUFNSSxtQkFBbUJkLDBFQUE2QixDQUFDSSxRQUFRQyxJQUFJLENBQUNRLEVBQUU7UUFFdEUsT0FBT1YsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFTztRQUFpQjtJQUNqRCxFQUFFLE9BQU9OLE9BQU87UUFDZFEsUUFBUVIsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT0wsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQTJCO0lBQ2xFO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYmVuYXVcXG15LWFwcFxccGFnZXNcXGFwaVxcc3RvcnlcXGhpZ2hsaWdodC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcm9uU2Vzc2lvbiB9IGZyb20gJ2lyb24tc2Vzc2lvbic7XHJcbmltcG9ydCB7IHNlc3Npb25PcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vbGliL3V0aWxzL2F1dGgnO1xyXG5pbXBvcnQgc3Rvcmllc0RiIGZyb20gJy4uLy4uLy4uL2xpYi9kYi9zdG9yaWVzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICAvLyBHZXQgc2Vzc2lvblxyXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRJcm9uU2Vzc2lvbihyZXEsIHJlcywgc2Vzc2lvbk9wdGlvbnMpO1xyXG4gIFxyXG4gIC8vIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZFxyXG4gIGlmICghc2Vzc2lvbi51c2VyKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ05vdCBhdXRoZW50aWNhdGVkJyB9KTtcclxuICB9XHJcblxyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHdvcmQgfSA9IHJlcS5ib2R5O1xyXG4gICAgXHJcbiAgICBpZiAoIXdvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdXb3JkIGlzIHJlcXVpcmVkJyB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU2F2ZSB0aGUgaGlnaGxpZ2h0ZWQgd29yZFxyXG4gICAgc3Rvcmllc0RiLnNhdmVIaWdobGlnaHRlZFdvcmQoc2Vzc2lvbi51c2VyLmlkLCB3b3JkKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IHRoZSB1cGRhdGVkIGxpc3Qgb2YgcmVjZW50bHkgaGlnaGxpZ2h0ZWQgd29yZHNcclxuICAgIGNvbnN0IHJlY2VudEhpZ2hsaWdodHMgPSBzdG9yaWVzRGIuZ2V0UmVjZW50SGlnaGxpZ2h0cyhzZXNzaW9uLnVzZXIuaWQpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyByZWNlbnRIaWdobGlnaHRzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoaWdobGlnaHRpbmcgd29yZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBoaWdobGlnaHQgd29yZCcgfSk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImdldElyb25TZXNzaW9uIiwic2Vzc2lvbk9wdGlvbnMiLCJzdG9yaWVzRGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsInVzZXIiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtZXRob2QiLCJ3b3JkIiwiYm9keSIsInNhdmVIaWdobGlnaHRlZFdvcmQiLCJpZCIsInJlY2VudEhpZ2hsaWdodHMiLCJnZXRSZWNlbnRIaWdobGlnaHRzIiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/story/highlight.js\n");

/***/ }),

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "iron-session":
/*!*******************************!*\
  !*** external "iron-session" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("iron-session");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstory%2Fhighlight&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstory%5Chighlight.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();